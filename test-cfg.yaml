#-------------------------------------------------------------------------------
#
# SDK Jenkins Pipeline Configuration
#
# Copyright (C) 2022, HENSOLDT Cyber GmbH
#
#-------------------------------------------------------------------------------

# Format for test configurations:
#
# <system name>
#   flags: [SDK_DEMO]
#   testSystem: <repo>
#   testScript: <name, defaults to <system name>.py >
#   buildParams:
#   - -D TEST_CONFIGURATION=<target>
#   testParams:
#   - --tc=platform.test_configuration:<target>"
#   platforms: # can be a simple array or a map
#     <name1>:
#     <name2>:
#       addFlags: [SDK_DEMO]
#       buildParams: <array>
#       testParams: <array>


#-------------------------------------------------------------------------------
# Fundamental Demo Systems, required for the SDK package sanity check
#-------------------------------------------------------------------------------

demo_hello_world:
  flags: [SDK_DEMO]
  testScript: test_demo_hello_world.py
  platforms:
    sabre:
      addFlags: [QEMU]
    zynq7000:
      addFlags: [QEMU]
    zynqmp:
      addFlags: [QEMU]
    qemu-arm-virt-a53:
    spike64:
    hifive:
      addFlags: [QEMU]


#------------------------------------------------------------------------------
# Test Systems
#
# Testing ZynqMP requires using the test container trentos_test:20210316
# which contains the Xilinx QEMU.
#------------------------------------------------------------------------------

test_timeserver:
  platforms:
    hifive:
      addFlags: [QEMU]

test_certserver:
  platforms:
    hifive:
      addFlags: [QEMU]

test_uart:
  platforms:
    hifive:
      addFlags: [QEMU]

test_chanmux:
  platforms:
    hifive:
      addFlags: [QEMU]

test_proxy_nvm:
  platforms:
    hifive:
      addFlags: [QEMU]

test_certparser:
  platforms:
    hifive:
      addFlags: [QEMU]

test_crypto_api:
  platforms:
    hifive:
      addFlags: [QEMU]

test_cryptoserver:
  platforms:
    hifive:
      addFlags: [QEMU]

test_entropysource:
  platforms:
    hifive:
      addFlags: [QEMU]

test_storage_interface:
  testScript: test_storage_interface*.py
  platforms:
    hifive:
      addFlags: [QEMU]

test_filesystem:
  platforms:
    zynqmp: # no test to reduce CI load?
      addFlags: [QEMU, NO_TEST]

test_config_server:
  platforms:
    hifive:
      addFlags: [QEMU]

test_keystore:
  platforms:
    hifive:
      addFlags: [QEMU]

test_logserver:
  platforms:
    hifive:
      addFlags: [QEMU]

test_tls_api:
  platforms:
    hifive:
      addFlags: [QEMU]

test_tlsserver:
  platforms:
    hifive:
      addFlags: [QEMU]
